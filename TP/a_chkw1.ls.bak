/PROG  A_CHKW1
/ATTR
OWNER		= MNEDITOR;
COMMENT		= "";
PROG_SIZE	= 6543;
CREATE		= DATE 13-09-16  TIME 12:40:02;
MODIFIED	= DATE 17-08-29  TIME 21:02:58;
FILE_NAME	= AUTO_CHK;
VERSION		= 0;
LINE_COUNT	= 356;
MEMORY_SIZE	= 7039;
PROTECT		= READ_WRITE;
TCD:  STACK_SIZE	= 0,
      TASK_PRIORITY	= 50,
      TIME_SLICE	= 0,
      BUSY_LAMP_OFF	= 0,
      ABORT_REQUEST	= 0,
      PAUSE_REQUEST	= 0;
DEFAULT_GROUP	= 1,*,*,*,*;
CONTROL_CODE	= 00000000 00000000;
/APPL
  ARC : TRUE ; 
  ARC Welding Equipment : 1,*,*,*,*;

MPAS ;
MPAS_NUM_PASSES        : 0;
MPAS_LAST_PASS         : 0;
MPAS_CURRENT_PASS      : 0;
MPAS_STATUS_PASS       : 0;
/MN
   1:  !****************************** ;
   2:  !*** Wire Check ;
   3:  !****************************** ;
   4:  OVERRIDE=100% ;
   5:  !------- SENS OVERRIDE ------- ;
   6:  R[135]=50    ;
   7:   ;
   8:  UTOOL_NUM=1 ;
   9:  UFRAME_NUM=7 ;
  10:  !------- TOOL WIDTH ------- ;
  11:  R[167]=30    ;
  12:   ;
  13:  RO[1]=OFF ;
  14:  DO[136]=OFF ;
  15:   ;
  16:   ;
  17:  PR[126]=LPOS    ;
  18:  IF (PR[126,1]>725),JMP LBL[120] ;
  19:  PR[126,1]=725    ;
  20:   ;
  21:L PR[126] 50mm/sec FINE    ;
  22:   ;
  23:   ;
  24:  !------- UNFOLD POINT ------- ;
  25:  LBL[120] ;
  26:  PR[120]=JPOS    ;
  27:  PR[120,1]=90    ;
  28:  PR[120,7]=1000    ;
  29:J PR[120] 50% FINE    ;
  30:   ;
  31:  LBL[121] ;
  32:  PR[121]=JPOS    ;
  33:  PR[121,1]=90    ;
  34:  PR[121,2]=90    ;
  35:  PR[121,3]=(-80)    ;
  36:  PR[121,4]=0    ;
  37:  PR[121,5]=30    ;
  38:  PR[121,6]=0    ;
  39:   ;
  40:J PR[121] 50% FINE    ;
  41:   ;
  42:  PR[122]=PR[121]    ;
  43:  PR[122,5]=(-100)    ;
  44:J PR[122] 50% FINE    ;
  45:   ;
  46:   ;
  47:  !Touch sensing off: ;
  48:  DO[256]=OFF ;
  49:   ;
  50:   ;
  51:  !****************************** ;
  52:  !**** SENSING ;
  53:  !****************************** ;
  54:   ;
  55:   ;
  56:  !------------ X1 --------------- ;
  57:   ;
  58:  PR[125]=LPOS    ;
  59:  PR[125,1]=648    ;
  60:  PR[125,3]=1220    ;
  61:  PR[125,4]=(-120)    ;
  62:  PR[125,5]=0    ;
  63:  PR[125,6]=(-90)    ;
  64:   ;
  65:  PR[124]=PR[125]    ;
  66:  PR[124,4]=180    ;
  67:  PR[124,5]=(-60)    ;
  68:  PR[124,6]=0    ;
  69:   ;
  70:  PR[123]=PR[125]    ;
  71:  PR[123,4]=120    ;
  72:  PR[123,5]=0    ;
  73:  PR[123,6]=90    ;
  74:   ;
  75:   ;
  76:L PR[125] 25mm/sec FINE    ;
  77:   ;
  78:  PR[160]=PR[125]    ;
  79:  PR[160,1]=PR[160,1]-20    ;
  80:  SKIP CONDITION DI[256]=ON    ;
  81:   ;
  82:  OVERRIDE=R[135] ;
  83:  DO[256]=ON ;
  84:L PR[160] 1mm/sec FINE Skip,LBL[991],PR[170]=LPOS    ;
  85:   ;
  86:  DO[256]=OFF ;
  87:  OVERRIDE=100% ;
  88:   ;
  89:  !------------ X2 --------------- ;
  90:   ;
  91:L PR[124] 50mm/sec FINE    ;
  92:   ;
  93:  PR[161]=PR[124]    ;
  94:  PR[161,1]=PR[161,1]-20    ;
  95:  SKIP CONDITION DI[256]=ON    ;
  96:   ;
  97:  OVERRIDE=R[135] ;
  98:  DO[256]=ON ;
  99:L PR[161] 1mm/sec FINE Skip,LBL[991],PR[171]=LPOS    ;
 100:   ;
 101:  DO[256]=OFF ;
 102:  OVERRIDE=100% ;
 103:   ;
 104:  !------------ X3 --------------- ;
 105:   ;
 106:L PR[123] 50mm/sec FINE    ;
 107:   ;
 108:  PR[162]=PR[123]    ;
 109:  PR[162,1]=PR[162,1]-20    ;
 110:  SKIP CONDITION DI[256]=ON    ;
 111:   ;
 112:  OVERRIDE=R[135] ;
 113:  DO[256]=ON ;
 114:L PR[162] 1mm/sec FINE Skip,LBL[991],PR[172]=LPOS    ;
 115:   ;
 116:  DO[256]=OFF ;
 117:  OVERRIDE=100% ;
 118:   ;
 119:L PR[123] 50mm/sec FINE    ;
 120:   ;
 121:  !------------ CHECK X ---------- ;
 122:   ;
 123:  PR[181,1]=PR[170,1]-PR[171,1]    ;
 124:  PR[181,2]=PR[171,1]-PR[172,1]    ;
 125:  PR[181,3]=PR[172,1]-PR[170,1]    ;
 126:  !distance to base ;
 127:  PR[181,5]=PR[170,1]-643.25    ;
 128:   ;
 129:  IF (PR[181,1]<0),PR[181,1]=(PR[181,1]*(-1)) ;
 130:  IF (PR[181,2]<0),PR[181,2]=(PR[181,2]*(-1)) ;
 131:  IF (PR[181,3]<0),PR[181,3]=(PR[181,3]*(-1)) ;
 132:   ;
 133:  PR[181,4]=PR[181,1]    ;
 134:  IF (PR[181,2]>PR[181,4]),PR[181,4]=(PR[181,2]) ;
 135:  IF (PR[181,3]>PR[181,4]),PR[181,4]=(PR[181,3]) ;
 136:   ;
 137:   ;
 138:   ;
 139:  !****************************** ;
 140:   ;
 141:  !------------ Z1 --------------- ;
 142:   ;
 143:  PR[125,1]=PR[171,1]-3    ;
 144:  PR[125,3]=1232    ;
 145:   ;
 146:  PR[125,4]=(-90)    ;
 147:  PR[125,5]=30    ;
 148:  PR[125,6]=(-90)    ;
 149:   ;
 150:  PR[124]=PR[125]    ;
 151:  PR[124,5]=(-90)    ;
 152:   ;
 153:  PR[123]=PR[125]    ;
 154:  PR[123,4]=90    ;
 155:  PR[123,5]=30    ;
 156:  PR[123,6]=90    ;
 157:   ;
 158:   ;
 159:  PR[35]=LPOS    ;
 160:  PR[35,1]=700    ;
 161:  PR[35,3]=1250    ;
 162:L PR[35] 50mm/sec FINE    ;
 163:   ;
 164:L PR[123] 50mm/sec FINE    ;
 165:   ;
 166:  PR[163]=PR[123]    ;
 167:  PR[163,3]=PR[163,3]-20    ;
 168:  SKIP CONDITION DI[256]=ON    ;
 169:   ;
 170:  OVERRIDE=R[135] ;
 171:  DO[256]=ON ;
 172:L PR[163] 1mm/sec FINE Skip,LBL[991],PR[173]=LPOS    ;
 173:   ;
 174:  DO[256]=OFF ;
 175:  OVERRIDE=50% ;
 176:  !----- ;
 177:   ;
 178:   ;
 179:L PR[124] 50mm/sec FINE    ;
 180:   ;
 181:  PR[164]=PR[124]    ;
 182:  PR[164,3]=PR[164,3]-20    ;
 183:  SKIP CONDITION DI[256]=ON    ;
 184:   ;
 185:  OVERRIDE=R[135] ;
 186:  DO[256]=ON ;
 187:L PR[164] 1mm/sec FINE Skip,LBL[991],PR[174]=LPOS    ;
 188:   ;
 189:  DO[256]=OFF ;
 190:  OVERRIDE=100% ;
 191:   ;
 192:   ;
 193:L PR[125] 50mm/sec FINE    ;
 194:   ;
 195:  PR[165]=PR[125]    ;
 196:  PR[165,3]=PR[165,3]-20    ;
 197:  SKIP CONDITION DI[256]=ON    ;
 198:   ;
 199:  OVERRIDE=R[135] ;
 200:  DO[256]=ON ;
 201:L PR[165] 1mm/sec FINE Skip,LBL[991],PR[175]=LPOS    ;
 202:   ;
 203:  DO[256]=OFF ;
 204:  OVERRIDE=100% ;
 205:   ;
 206:L PR[125] 50mm/sec FINE    ;
 207:   ;
 208:  PR[126]=LPOS    ;
 209:  PR[126,3]=PR[126,3]+5    ;
 210:L PR[126] 50mm/sec FINE    ;
 211:   ;
 212:  !----- ;
 213:  !------------ CHECK Z ---------- ;
 214:   ;
 215:  PR[182,1]=PR[173,3]-PR[174,3]    ;
 216:  PR[182,2]=PR[174,3]-PR[175,3]    ;
 217:  PR[182,3]=PR[175,3]-PR[173,3]    ;
 218:   ;
 219:  IF (PR[182,1]<0),PR[182,1]=(PR[182,1]*(-1)) ;
 220:  IF (PR[182,2]<0),PR[182,2]=(PR[182,2]*(-1)) ;
 221:  IF (PR[182,3]<0),PR[182,3]=(PR[182,3]*(-1)) ;
 222:   ;
 223:  PR[182,4]=PR[182,1]    ;
 224:  IF (PR[182,2]>PR[182,4]),PR[182,4]=(PR[182,2]) ;
 225:  IF (PR[182,3]>PR[182,4]),PR[182,4]=(PR[182,3]) ;
 226:   ;
 227:   ;
 228:   ;
 229:  !Y ;
 230:  PR[125,1]=PR[171,1]-3    ;
 231:  PR[125,3]=1222    ;
 232:  PR[125,2]=979    ;
 233:   ;
 234:  PR[125,4]=(-90)    ;
 235:  PR[125,5]=30    ;
 236:  PR[125,6]=(-90)    ;
 237:   ;
 238:  PR[124]=PR[125]    ;
 239:  PR[124,5]=(-90)    ;
 240:   ;
 241:  PR[123]=PR[125]    ;
 242:  PR[123,4]=90    ;
 243:  PR[123,5]=30    ;
 244:  PR[123,6]=90    ;
 245:   ;
 246:  PR[35]=LPOS    ;
 247:  PR[35,2]=975    ;
 248:L PR[35] 50mm/sec FINE    ;
 249:   ;
 250:   ;
 251:L PR[125] 3deg/sec FINE    ;
 252:   ;
 253:  PR[166]=PR[125]    ;
 254:  PR[166,2]=PR[166,2]+20    ;
 255:  SKIP CONDITION DI[256]=ON    ;
 256:   ;
 257:  OVERRIDE=R[135] ;
 258:  DO[256]=ON ;
 259:L PR[166] 1mm/sec FINE Skip,LBL[991],PR[176]=LPOS    ;
 260:   ;
 261:  DO[256]=OFF ;
 262:  OVERRIDE=100% ;
 263:  !----- ;
 264:   ;
 265:   ;
 266:L PR[124] 50mm/sec FINE    ;
 267:   ;
 268:  PR[167]=PR[124]    ;
 269:  PR[167,2]=PR[167,2]+20    ;
 270:  SKIP CONDITION DI[256]=ON    ;
 271:   ;
 272:  OVERRIDE=R[135] ;
 273:  DO[256]=ON ;
 274:L PR[167] 1mm/sec FINE Skip,LBL[991],PR[177]=LPOS    ;
 275:   ;
 276:  DO[256]=OFF ;
 277:  OVERRIDE=100% ;
 278:   ;
 279:   ;
 280:L PR[123] 50mm/sec FINE    ;
 281:   ;
 282:  PR[168]=PR[123]    ;
 283:  PR[168,2]=PR[168,2]+20    ;
 284:  SKIP CONDITION DI[256]=ON    ;
 285:   ;
 286:  OVERRIDE=R[135] ;
 287:  DO[256]=ON ;
 288:L PR[168] 1mm/sec FINE Skip,LBL[991],PR[178]=LPOS    ;
 289:   ;
 290:  DO[256]=OFF ;
 291:  OVERRIDE=100% ;
 292:  !----- ;
 293:L PR[123] 50mm/sec FINE    ;
 294:  !----- ;
 295:  !------------ CHECK Y ---------- ;
 296:   ;
 297:  PR[183,1]=PR[176,2]-PR[177,2]    ;
 298:  PR[183,2]=PR[177,2]-PR[178,2]    ;
 299:  PR[183,3]=PR[178,2]-PR[176,2]    ;
 300:   ;
 301:  IF (PR[183,1]<0),PR[183,1]=(PR[183,1]*(-1)) ;
 302:  IF (PR[183,2]<0),PR[183,2]=(PR[183,2]*(-1)) ;
 303:  IF (PR[183,3]<0),PR[183,3]=(PR[183,3]*(-1)) ;
 304:   ;
 305:  PR[183,4]=PR[183,1]    ;
 306:  IF (PR[183,2]>PR[183,4]),PR[183,4]=(PR[183,2]) ;
 307:  IF (PR[183,3]>PR[183,4]),PR[183,4]=(PR[183,3]) ;
 308:   ;
 309:   ;
 310:   ;
 311:  DO[256]=OFF ;
 312:   ;
 313:  PR[120]=LPOS    ;
 314:  PR[120,1]=PR[120,1]+100    ;
 315:L PR[120] 50mm/sec FINE    ;
 316:   ;
 317:J PR[121] 50% CNT50    ;
 318:   ;
 319:  !****************************** ;
 320:  !**** RESULT HANDLING ;
 321:  !****************************** ;
 322:  R[172]=1.2    ;
 323:  R[170]=0    ;
 324:  IF ((PR[181,4]>R[172] OR PR[182,4]>R[172] OR PR[183,4]>R[172])),R[170]=(2) ;
 325:  //IF (PR[181,5]>1.5),R[170]=(3) ;
 326:  //IF (PR[181,5]<(-1.5)),R[170]=(3) ;
 327:   ;
 328:  IF (R[170]=0) THEN ;
 329:  MESSAGE[Wire calib ok] ;
 330:  R[215]=6060    ;
 331:  ELSE ;
 332:  MESSAGE[Wire calib not ok] ;
 333:  R[215]=6061    ;
 334:  ENDIF ;
 335:  JMP LBL[9999] ;
 336:   ;
 337:  !****************************** ;
 338:  !**** ERROR HANDLING ;
 339:  !****************************** ;
 340:  LBL[991] ;
 341:  R[162]=603    ;
 342:   ;
 343:  PR[126]=LPOS    ;
 344:  PR[126,1]=PR[126,1]+100    ;
 345:   ;
 346:L PR[126] 50mm/sec FINE    ;
 347:   ;
 348:J PR[121] 50% FINE    ;
 349:   ;
 350:  LBL[9999] ;
 351:  OVERRIDE=100% ;
 352:  CALL FOLD1    ;
 353:  UTOOL_NUM=1 ;
 354:  UFRAME_NUM=1 ;
 355:   ;
 356:   ;
/POS
/END
