/PROG  PB_WEB3
/ATTR
OWNER		= MNEDITOR;
COMMENT		= "";
PROG_SIZE	= 2571;
CREATE		= DATE 10-08-05  TIME 14:56:58;
MODIFIED	= DATE 18-01-30  TIME 20:48:08;
FILE_NAME	= ;
VERSION		= 0;
LINE_COUNT	= 123;
MEMORY_SIZE	= 2999;
PROTECT		= READ_WRITE;
TCD:  STACK_SIZE	= 0,
      TASK_PRIORITY	= 50,
      TIME_SLICE	= 0,
      BUSY_LAMP_OFF	= 0,
      ABORT_REQUEST	= 0,
      PAUSE_REQUEST	= 0;
DEFAULT_GROUP	= *,*,1,*,*;
CONTROL_CODE	= 00000000 00000000;
/APPL
  ARC : TRUE ; 
  ARC Welding Equipment : *,1,*,*,*;

MPAS ;
MPAS_NUM_PASSES        : 0;
MPAS_LAST_PASS         : 0;
MPAS_CURRENT_PASS      : 0;
MPAS_STATUS_PASS       : 0;
/MN
   1:  JMP LBL[555] ;
   2:  R[153]=0    ;
   3:  LBL[555] ;
   4:  !************************** ;
   5:  !** WELD V/U Robot1 ;
   6:  !************************** ;
   7:   ;
   8:  UFRAME_NUM=2 ;
   9:  UTOOL_NUM=1 ;
  10:  Weave End ;
  11:  Track End ;
  12:   ;
  13:   ;
  14:  !-- ARC PARAM -- ;
  15:  WAIT R[109]=0    ;
  16:  R[13]=6    ;
  17:  R[115]=1    ;
  18:  R[116]=3    ;
  19:  CALL WELD_PA    ;
  20:   ;
  21:  !-- AT RESUME JMP TO LABEL ;
  22:  IF ((R[153]>100)),JMP LBL[R[153]] ;
  23:   ;
  24:   ;
     32:  !**************************** ;
  33:  !**** POSITION CALC & POINTS ;
  34:  !**************************** ;
  :;
    38:  !* FUT 000 OR FUT 00-1 (PR[43-44) ;
  39:   ;
  40:  !***  POSITION CALC START ;
  41:  R[105]=(60+(R[95]*10)) ;
  42:   ;
  43:  !***  CONFIG CALC ;
  44:  R[106]=43    ;
  45:  IF (R[95]=(1)),R[106]=(45) ;
  46:   ;
  47:  CALL PRG_CALC3    ;
  :;
    65:  !Start Angle up point ;
   66:  !-- WELDING  POINT 5 ;
  50:  R[145]=0    ;
  :!Depending on Profile type;
    51:  R[138]=20   ;
  :if (R[252]=2), R[138]=110;
    :R[146]=R[138];
  :;
  52:  CALL PRG_CALC3    ;
  53:  R[104]=R[105]+11    ;
  55:  PR[5]=PR[R[104]]    ;
  56:  PR[5,1]=PR[5,1]+R[145]    ;
  57:  PR[5,2]=PR[5,2]+R[146]    ;
  59:  !7 axis ;
  60:  IF (R[268]=1 AND R[81]=2) THEN ;
  61:  PR[5,7]=(PR[5,7]+200*R[83]*R[179]) ;
  62:  ENDIF ;
  :;
    74:  !End Angle up point ;
  75:  !-- WELDING  POINT 6 ;
  50:  R[145]=0    ;

    51:  R[138]=R[138]+100   ;
    :R[146]=R[138];
  :;
  52:  CALL PRG_CALC3    ;
  53:  R[104]=R[105]+11    ;
    81:  PR[6]=PR[26]+PR[R[104]]    ;
  56:  PR[6,1]=PR[6,1]+R[145]    ;
  57:  PR[6,2]=PR[6,2]+R[146]    ;
:PR[6,7]=PR[6,7];
:;

  64:  !--  WELDING  POINT 16 ;
  65:  R[145]=0    ;
  66:  R[146]=0    ;
  67:  CALL PRG_CALC3    ;
  68:  R[104]=R[105]+10    ;
  69:  PR[16]=PR[25]+PR[R[104]]    ;
  70:  PR[16,1]=PR[16,1]+R[145]    ;
  71:  PR[16,2]=PR[16,2]+R[146]    ;
  72:  PR[16,3]=PR[16,3]    ;
  73:  PR[16,4]=PR[26,4]    ;
  74:  PR[16,5]=PR[26,5]    ;
  75:  PR[16,6]=PR[26,6]    ;
  76:   ;
  77:   ;
  78:  !resetting angles ;
  79:  R[191]=0    ;
  80:  R[192]=0    ;
  81:  R[193]=0    ;
  82:  CALL PRG_CALC3    ;
  83:  R[268]=R[190]    ;

  94:  !**************************** ;
  95:  ! Call sub programs for Starting ;
  96:  !**************************** ;
  25:   ;
  26:  ! Call sub programs for Starting ;
  27:  IF (R[267]=1 OR R[267]=5) THEN ;
  28:  CALL PB_WEMID3    ;
  29:  ENDIF ;
  30:   ;
  31:  IF (R[267]=2 OR R[267]=4) THEN ;
  32:  CALL PB_WEEDGE3    ;
  33:  ENDIF ;

  84:   ;
  87:  !** -------------------  ** ;
  88:   ;
  90:  LBL[205] ;
  91:  R[153]=205    ;
   132:  !using current angles ;
 133:  PR[120]=LPOS    ;
 134:  PR[5,4]=PR[120,4]    ;
 135:  PR[5,5]=PR[120,5]    ;
 136:  PR[5,6]=PR[120,6]    ;
  93:   ;
  94:  Weave Sine[3] ;
  95:  Track TAST[R[23]] ;
  96:  Weld Start E2[1,R[112],E0] ;
  97:  R[137]=R[127]*.85    ;
  98:   ;
 100:L PR[5] R[137]cm/min CNT100    ;
 :;
    90:  LBL[206] ;
  91:  R[153]=206    ;
  92:  !skip PR6 if short end ;
  93:  IF R[97]=1,JMP LBL[216] ;
  94:   ;
  94:  Weave Sine[3] ;
  95:  Track TAST[R[23]] ;
  96:  Weld START E2[1,R[112],E0] ;
  99:   ;
 100:L PR[6] R[127]cm/min CNT100    ;
 
 
 100:   ;
 101:  LBL[216] ;
 102:  R[153]=216    ;
 103:  UFRAME_NUM=1 ;
 104:  Weave Sine[3] ;
 105:  Track TAST[R[23]] ;
 106:  Weld Start E2[1,R[112],E0] ;
 107:   ;
 108:L PR[16] R[127]cm/min FINE    ;
 109:  Weave End[3] ;
 110:  Track End ;
 111:  Weld End E2[1,R[112]] ;
 112:   ;
 113:  UFRAME_NUM=2 ;
 :!returning point;
  18:  !Unfold point ;
  19:  PR[120]=JPOS    ;
  20:  PR[120,1]=(90)    ;
  21:  PR[120,2]=(-55)    ;
  22:  PR[120,3]=20    ;
  23:  PR[120,4]=0    ;
  24:  PR[120,5]=50   ;
  25:  PR[120,6]=0    ;
  :;
   101:  LBL[217] ;
 102:  R[153]=217    ;
 119:L PR[120] 150mm/sec FINE    ;
 119:   ;
 120:  LBL[999] ;
 121:  R[153]=0    ;
 122:   ;
 123:  LBL[1000] ;
/POS
/END
